// Carapace gateway configuration
//
// Copy this file to ~/.moltbot/moltbot.json5 and edit to taste.
// Override the path with MOLTBOT_CONFIG_PATH or MOLTBOT_STATE_DIR env vars.
//
// Format: JSON5 (comments, trailing commas, unquoted keys are all valid)
// Docs:   docs/protocol/config.md

{
  // --- Gateway server ---------------------------------------------------
  gateway: {
    bind: "loopback",       // "loopback" | "lan" | "tailnet" | "all" | custom IP
    port: 18789,

    auth: {
      // Uncomment one:
      // mode: "token",
      // token: "${MOLTBOT_GATEWAY_TOKEN}",

      // mode: "password",
      // password: "${MOLTBOT_GATEWAY_PASSWORD}",

      // Allow Tailscale-authenticated connections (requires tailscale.mode = "serve")
      // allowTailscale: true,
    },

    // tailscale: {
    //   mode: "serve",      // "off" | "serve"
    // },

    // Webhook / hooks API
    hooks: {
      enabled: false,
      // token: "${HOOKS_TOKEN}",
      // path: "/hooks",
      // maxBodyBytes: 262144,   // 256 KB
    },

    // OpenAI-compatible API endpoints
    // openai: {
    //   chatCompletions: true,  // POST /v1/chat/completions
    //   responses: true,        // POST /v1/responses
    // },

    // Control UI (web dashboard)
    // controlUi: {
    //   enabled: true,
    //   path: "dist/control-ui",
    // },

    // Trusted reverse proxy IPs (for X-Forwarded-For)
    // trustedProxies: ["127.0.0.1", "::1"],
  },

  // --- LLM provider -----------------------------------------------------
  anthropic: {
    apiKey: "${ANTHROPIC_API_KEY}",   // export ANTHROPIC_API_KEY="sk-ant-..."
    // baseUrl: "https://api.anthropic.com",  // override with ANTHROPIC_BASE_URL env var
  },

  // --- OpenAI / OpenAI-compatible provider ----------------------------------
  // openai: {
  //   apiKey: "${OPENAI_API_KEY}",
  //   // baseUrl: "https://api.openai.com",       // default
  //   // For local servers (vLLM, llama.cpp, LM Studio, MLX):
  //   // baseUrl: "http://localhost:8000/v1",
  //   // apiKey: "unused",                         // required but ignored by most local servers
  // },

  // --- Ollama provider ------------------------------------------------------
  // ollama: {
  //   // baseUrl: "http://localhost:11434",       // default
  //   // apiKey: "optional-key",                  // for remote instances with auth
  // },

  // --- Signal channel (via signal-cli REST API) ------------------------------
  // signal: {
  //   baseUrl: "http://localhost:8080",           // signal-cli-rest-api address
  //   phoneNumber: "+15551234567",                // registered Signal number
  //   // enabled: false,                          // set to false to disable without removing config
  // },

  // --- Agents -----------------------------------------------------------
  // agents: {
  //   list: [
  //     {
  //       id: "default",
  //       default: true,
  //       identity: {
  //         name: "Carapace",
  //         description: "A helpful assistant",
  //       },
  //     },
  //   ],
  // },

  // --- Sessions ---------------------------------------------------------
  // sessions: {
  //   retentionDays: 90,       // auto-delete sessions older than N days (default: unlimited)
  // },

  // --- Logging ----------------------------------------------------------
  // logging: {
  //   level: "info",          // "trace" | "debug" | "info" | "warn" | "error"
  //   format: "pretty",       // "pretty" | "json"
  // },

  // --- Venice AI provider ------------------------------------------------
  // venice: {
  //   apiKey: "${VENICE_API_KEY}",   // export VENICE_API_KEY="..."
  //   // baseUrl: "https://api.venice.ai/api",  // override with VENICE_BASE_URL env var
  // },

  // --- Inbound message classifier ----------------------------------------
  // classifier: {
  //   enabled: true,
  //   mode: "warn",              // "off" | "warn" | "block"
  //   model: "gpt-4o-mini",     // cheap/fast model for classification
  //   blockThreshold: 0.8,      // confidence threshold (0.0â€“1.0)
  // },

  // --- Plugins (WASM) ---------------------------------------------------
  // plugins: {
  //   enabled: true,
  //   load: {
  //     paths: ["/path/to/plugins"],
  //   },
  // },
}
